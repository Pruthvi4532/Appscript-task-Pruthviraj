<!DOCTYPE html>
<html>
<head>
    <title>Debug Images</title>
    <link rel="stylesheet" href="./html-css-only/styles.css">
</head>
<body>
    <div class="container">
        <h1>Debug Image Loading</h1>
        <div id="debug-info"></div>
        
        <section class="plp-grid">
            <h2 class="sr-only">Product results</h2>
            <!-- Test with one product -->
        </section>
    </div>
    
    <script>
        // Test single product
        const testProduct = {
            name: "Fjallraven Backpack",
            price: 109.95,
            category: "men's clothing",
            rating: 3.9,
            image: "https://fakestoreapi.com/img/81fPKd-2AYL._AC_SL1500_.jpg"
        };
        
        function toINR(usd) {
            const inr = Math.round(usd * 83);
            return `₹ ${inr.toLocaleString("en-IN")}`;
        }
        
        function renderTestProduct(product) {
            const grid = document.querySelector('.plp-grid');
            const card = document.createElement('article');
            card.className = 'card';
            card.innerHTML = `
                <img class="card-img" src="${product.image}" alt="Product image of ${product.name}" 
                     onerror="console.error('Image failed to load:', this.src); this.style.border='2px solid red';"
                     onload="console.log('Image loaded successfully:', this.src);" />
                <div class="card-body">
                    <h3 class="card-title">${product.name}</h3>
                    <p class="card-meta">${product.category} • ★ ${product.rating}</p>
                    <div class="card-row">
                        <span class="price">${toINR(product.price)}</span>
                        <button class="btn" type="button">Add</button>
                    </div>
                </div>
            `;
            grid.appendChild(card);
            
            // Debug info
            const debugDiv = document.getElementById('debug-info');
            debugDiv.innerHTML = `
                <h3>Debug Information:</h3>
                <p><strong>Product:</strong> ${product.name}</p>
                <p><strong>Image URL:</strong> ${product.image}</p>
                <p><strong>Status:</strong> <span id="status">Loading...</span></p>
                <p><strong>Check browser console for image load events</strong></p>
            `;
        }
        
        // Test after page load
        document.addEventListener('DOMContentLoaded', function() {
            renderTestProduct(testProduct);
            
            // Update status after a delay
            setTimeout(() => {
                const statusEl = document.getElementById('status');
                const img = document.querySelector('.card-img');
                if (img && img.complete && img.naturalHeight !== 0) {
                    statusEl.innerHTML = '<span style="color: green;">✅ Image loaded successfully</span>';
                    statusEl.style.fontWeight = 'bold';
                } else {
                    statusEl.innerHTML = '<span style="color: red;">❌ Image failed to load</span>';
                    statusEl.style.fontWeight = 'bold';
                }
            }, 3000);
        });
    </script>
</body>
</html>
