<!DOCTYPE html>
<html>
<head>
    <title>Direct Sort Test</title>
    <link rel="stylesheet" href="./html-css-only/styles.css">
    <style>
        .debug { background: #ffeb3b; padding: 10px; margin: 10px 0; }
        .test-section { margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="debug">
            <h3>Sorting Test - Direct Implementation</h3>
            <p>Open browser console to see debug logs</p>
        </div>

        <div class="test-section">
            <label for="sortSelect">Sort:</label>
            <select id="sortSelect">
                <option value="featured">Featured</option>
                <option value="price_asc">Price: Low to High</option>
                <option value="price_desc">Price: High to Low</option>
                <option value="rating_desc">Rating</option>
            </select>
        </div>

        <section class="plp-grid" aria-label="Product grid">
            <h2 class="sr-only">Product results</h2>
            <!-- Products will be rendered here -->
        </section>
    </div>

    <script>
        // Sample products
        const products = [
            { id: 1, name: "Cheap T-Shirt", price: 12.99, category: "men's clothing", rating: 3.6 },
            { id: 2, name: "Medium Jacket", price: 55.99, category: "men's clothing", rating: 4.7 },
            { id: 3, name: "Expensive Watch", price: 299.99, category: "jewelery", rating: 4.2 },
            { id: 4, name: "Very Expensive Ring", price: 695, category: "jewelery", rating: 4.0 }
        ];

        let currentProducts = [...products];

        function toINR(usd) {
            const inr = Math.round(usd * 83);
            return `₹ ${inr.toLocaleString("en-IN")}`;
        }

        function renderProducts(productsToRender) {
            const grid = document.querySelector('.plp-grid');
            grid.innerHTML = '<h2 class="sr-only">Product results</h2>';
            
            productsToRender.forEach((product, index) => {
                const card = document.createElement('article');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-body">
                        <h3 class="card-title">${index + 1}. ${product.name}</h3>
                        <p class="card-meta">${product.category} • ★ ${product.rating}</p>
                        <div class="card-row">
                            <span class="price">${toINR(product.price)}</span>
                            <button class="btn" type="button">Add</button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function sortProducts(sortType) {
            console.log('=== SORTING TEST ===');
            console.log('Sort type:', sortType);
            console.log('Before sorting:', currentProducts.map(p => `${p.name}: ₹${toINR(p.price)}`));
            
            let sorted = [...currentProducts];
            
            switch(sortType) {
                case 'price_asc':
                    sorted.sort((a, b) => a.price - b.price);
                    break;
                case 'price_desc':
                    sorted.sort((a, b) => b.price - a.price);
                    break;
                case 'rating_desc':
                    sorted.sort((a, b) => b.rating - a.rating);
                    break;
                default:
                    console.log('No sorting applied');
                    break;
            }
            
            console.log('After sorting:', sorted.map(p => `${p.name}: ₹${toINR(p.price)}`));
            renderProducts(sorted);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded');
            renderProducts(currentProducts);
            
            document.getElementById('sortSelect').addEventListener('change', function(e) {
                console.log('Dropdown changed to:', e.target.value);
                sortProducts(e.target.value);
            });
        });
    </script>
</body>
</html>
